import { Injectable } from '@angular/core';
import { Http, RequestOptionsArgs, URLSearchParams, Headers } from '@angular/http';

import { Config } from 'ionic-angular';
import 'rxjs/add/operator/map'
import 'rxjs/add/operator/toPromise';
import 'rxjs/add/operator/timeout'

import { Messages } from './messages';

@Injectable()
export class Api {

    constructor(private http: Http, private config: Config, private messages: Messages) {

    }

    get(resource: string, method: string, params?: any) {

        let url = this.config.get("apiServerUrl") + "/" + resource + "/" + method;

        let opt: RequestOptionsArgs = {
            search: this.createSearchParams(params),
            headers: this.createHeaders()
        }

        return this.http.get(url, opt).timeout(10000, new Error('timeout exceeded')).map(response => {
            return response.json()
        }).toPromise();
    }

    post(resource: string, method: string, body: any, params?: any) {

        let url = this.config.get("apiServerUrl") + "/" + resource + "/" + method;

        let opt: RequestOptionsArgs = {
            search: this.createSearchParams(params),
            headers: this.createHeaders()
        }

        opt.headers.set("Content-Type", "application/json");

        return this.http.post(url, JSON.stringify(body), opt).timeout(10000, new Error('timeout exceeded')).map(response => {
            // if no content returned
            if (response.status === 204) {
                return;
            } else {
                return response.json();
            }
        }).toPromise();
    }

    getFakeRoutePath() {
        return Promise.resolve({ "Path": ["19.444397235086,-99.139788150787", "19.43642490888,-99.141955375671", "19.431243896484,-99.141494750977", "19.426772609418,-99.142255783081", "19.421652813188,-99.143371582031", "19.413330078125,-99.144180297852", "19.408498447018,-99.135754108429", "19.406596035209,-99.126291275024", "19.403114968757,-99.122128486633", "19.398540896103,-99.113502502441", "19.38858273578,-99.112322330475", "19.379231225787,-99.109683036804", "19.37376580902,-99.107730388641", "19.365041004588,-99.109189510345", "19.356174019578,-99.101314544678", "19.357935308399,-99.093997478485", "19.356052550682,-99.085521697998", "19.350728075203,-99.074728488922", "19.345727363947,-99.063591957092"], "ReturnPath": [] });
    }

    getFakeCloseRoutes() {
        return Promise.resolve(
            [{ "ID": 8, "TypeName": "Metro", "FromName": "Garibaldi", "ToName": "Constitución De 1917", "Name": "Linea 8" }, { "ID": 84, "TypeName": "RTP", "FromName": "Metro San Lázaro", "ToName": "Xochimilco", "Name": "Ruta 2D" }, { "ID": 89, "TypeName": "RTP", "FromName": "Puente Negro", "ToName": "Carmen Serdán", "Name": "Ruta 39" }, { "ID": 91, "TypeName": "RTP", "FromName": "Metro San Lázaro", "ToName": "Xochimilco/Bosque De Nativitas", "Name": "Ruta 39A" }, { "ID": 92, "TypeName": "RTP", "FromName": "Metro San Lázaro", "ToName": "Xochimilco/Bosque De Nativitas", "Name": "Ruta 39B" }, { "ID": 307, "TypeName": "Trolebús", "FromName": "Infonavit Iztacalco", "ToName": "Metro Villa De Cortés", "Name": "Linea M" }, { "ID": 308, "TypeName": "Trolebús", "FromName": "Central De Abastos", "ToName": "Metro Mixcoac", "Name": "Linea O" }, { "ID": 310, "TypeName": "Trolebús", "FromName": "Metro Moctezuma", "ToName": "Ctm Culhuacán", "Name": "Linea R1" }, { "ID": 311, "TypeName": "Trolebús", "FromName": "Metro Moctezuma", "ToName": "Villa Coapa", "Name": "Linea R2" }, { "ID": 1143, "TypeName": "Microbús", "FromName": "Central De Abasto", "ToName": "Villa De Cortés (Metro)", "Name": "R 48" }, { "ID": 1155, "TypeName": "Microbús", "FromName": "Periferico", "ToName": "San Lázaro (Metro)", "Name": "R 60" }, { "ID": 1281, "TypeName": "Microbús", "FromName": "San Lázaro (Metro)", "ToName": "Tec De Monterrey", "Name": "R 199" }, { "ID": 1484, "TypeName": "Microbús", "FromName": "Villa Coapa Vaqueritos", "ToName": "San Lázaro (Metro)", "Name": "R 470" }]);
    }

    getFakeSearch() {
        return Promise.resolve({ "Results": [{ "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito" }, "EndTravelTime": "\/Date(1480142218214-0800)\/", "Items": [{ "Distance": 5.7106640952478206E-07, "End": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Apatlaco", "InDirection": null, "Path": [{ "Lat": 19.37923123, "Lng": -99.10968304, "Name": "" }, { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco", "Route": null }, "StartName": "Metro Apatlaco", "Time": 6.0000068527969139, "Type": { "Name": "Caminado" } }, { "Distance": 9.2765397377209435, "End": { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "Garibaldi", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Garibaldi", "InDirection": "Garibaldi", "Path": [{ "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }, { "Lat": 19.38858273578, "Lng": -99.112322330475, "Name": "" }, { "Lat": 19.398540896103, "Lng": -99.113502502441, "Name": "" }, { "Lat": 19.403114968757, "Lng": -99.122128486633, "Name": "" }, { "Lat": 19.406596035209, "Lng": -99.126291275024, "Name": "" }, { "Lat": 19.408498447018, "Lng": -99.135754108429, "Name": "" }, { "Lat": 19.413330078125, "Lng": -99.144180297852, "Name": "" }, { "Lat": 19.421652813188, "Lng": -99.143371582031, "Name": "" }, { "Lat": 19.426772609418, "Lng": -99.142255783081, "Name": "" }, { "Lat": 19.431243896484, "Lng": -99.141494750977, "Name": "" }, { "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "" }, { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "" }], "Price": 5, "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } }, "Start": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Apatlaco", "Time": 15.902639550378764, "Type": { "Name": "Metro" } }, { "Distance": 0.06109333274251183, "End": { "Lat": 19.4446911663, "Lng": -99.1393047789, "Name": "Eje Central Lázaro Cárdenas 150", "Route": { "FromName": "Terminal Central de Autobuses del Norte", "Name": "Linea A", "ToName": "Terminal Central de Autobuses del Sur", "Type": { "Name": "Trolebús" } } }, "EndName": "Eje Central Lázaro Cárdenas 150", "InDirection": null, "Path": [{ "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "" }, { "Lat": 19.4446911663, "Lng": -99.1393047789, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "Garibaldi", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Garibaldi", "Time": 6.733119992910142, "Type": { "Name": "Caminado" } }, { "Distance": 2.2216008174484161, "End": { "Lat": 19.465135589, "Lng": -99.1376531124, "Name": "Circuito Interior 1393", "Route": { "FromName": "Terminal Central de Autobuses del Norte", "Name": "Linea A", "ToName": "Terminal Central de Autobuses del Sur", "Type": { "Name": "Trolebús" } } }, "EndName": "Circuito Interior 1393", "InDirection": "Terminal Central de Autobuses del Norte", "Path": [{ "Lat": 19.4446911663, "Lng": -99.1393047789, "Name": "" }, { "Lat": 19.4497596533, "Lng": -99.138425014, "Name": "" }, { "Lat": 19.4547774006, "Lng": -99.1384357428, "Name": "" }, { "Lat": 19.4575486939, "Lng": -99.1379320621, "Name": "" }, { "Lat": 19.4609583236, "Lng": -99.1377812838, "Name": "" }, { "Lat": 19.4622936147, "Lng": -99.1376954531, "Name": "" }, { "Lat": 19.465135589, "Lng": -99.1376531124, "Name": "" }], "Price": 2, "Route": { "FromName": "Terminal Central de Autobuses del Norte", "Name": "Linea A", "ToName": "Terminal Central de Autobuses del Sur", "Type": { "Name": "Trolebús" } }, "Start": { "Lat": 19.4446911663, "Lng": -99.1393047789, "Name": "Eje Central Lázaro Cárdenas 150", "Route": { "FromName": "Terminal Central de Autobuses del Norte", "Name": "Linea A", "ToName": "Terminal Central de Autobuses del Sur", "Type": { "Name": "Trolebús" } } }, "StartName": "Eje Central Lázaro Cárdenas 150", "Time": 6.6648024523452474, "Type": { "Name": "Trolebús" } }, { "Distance": 0.51200105297128384, "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito", "Route": null }, "EndName": "Metrobús Circuito", "InDirection": null, "Path": [{ "Lat": 19.465135589, "Lng": -99.1376531124, "Name": "" }, { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.465135589, "Lng": -99.1376531124, "Name": "Circuito Interior 1393", "Route": { "FromName": "Terminal Central de Autobuses del Norte", "Name": "Linea A", "ToName": "Terminal Central de Autobuses del Sur", "Type": { "Name": "Trolebús" } } }, "StartName": "Circuito Interior 1393", "Time": 6.1440126356554066, "Type": { "Name": "Caminado" } }], "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco" }, "StartTravelTime": "\/Date(1480139731540-0800)\/", "TotalDistance": 12.071235511949565, "TotalPrice": 7, "TotalTime": 41.444581484086477 }, { "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito" }, "EndTravelTime": "\/Date(1480142336581-0800)\/", "Items": [{ "Distance": 5.7106640952478206E-07, "End": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Apatlaco", "InDirection": null, "Path": [{ "Lat": 19.37923123, "Lng": -99.10968304, "Name": "" }, { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco", "Route": null }, "StartName": "Metro Apatlaco", "Time": 6.0000068527969139, "Type": { "Name": "Caminado" } }, { "Distance": 9.2765397377209435, "End": { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "Garibaldi", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Garibaldi", "InDirection": "Garibaldi", "Path": [{ "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }, { "Lat": 19.38858273578, "Lng": -99.112322330475, "Name": "" }, { "Lat": 19.398540896103, "Lng": -99.113502502441, "Name": "" }, { "Lat": 19.403114968757, "Lng": -99.122128486633, "Name": "" }, { "Lat": 19.406596035209, "Lng": -99.126291275024, "Name": "" }, { "Lat": 19.408498447018, "Lng": -99.135754108429, "Name": "" }, { "Lat": 19.413330078125, "Lng": -99.144180297852, "Name": "" }, { "Lat": 19.421652813188, "Lng": -99.143371582031, "Name": "" }, { "Lat": 19.426772609418, "Lng": -99.142255783081, "Name": "" }, { "Lat": 19.431243896484, "Lng": -99.141494750977, "Name": "" }, { "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "" }, { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "" }], "Price": 0, "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } }, "Start": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Apatlaco", "Time": 15.902639550378764, "Type": { "Name": "Metro" } }, { "Distance": 0.0069527505488056725, "End": { "Lat": 19.444457936575, "Lng": -99.139766693115, "Name": "Garibaldi", "Route": { "FromName": "Ciudad Azteca", "Name": "Linea B", "ToName": "Buenavista", "Type": { "Name": "Metro" } } }, "EndName": "Metro Garibaldi", "InDirection": null, "Path": [{ "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "" }, { "Lat": 19.444457936575, "Lng": -99.139766693115, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.444397235086, "Lng": -99.139788150787, "Name": "Garibaldi", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Garibaldi", "Time": 6.0834330065856683, "Type": { "Name": "Caminado" } }, { "Distance": 1.4707729396979885, "End": { "Lat": 19.446542007274, "Lng": -99.153220653534, "Name": "Buenavista", "Route": { "FromName": "Ciudad Azteca", "Name": "Linea B", "ToName": "Buenavista", "Type": { "Name": "Metro" } } }, "EndName": "Metro Buenavista", "InDirection": "Buenavista", "Path": [{ "Lat": 19.444457936575, "Lng": -99.139766693115, "Name": "" }, { "Lat": 19.445145885202, "Lng": -99.14538860321, "Name": "" }, { "Lat": 19.446542007274, "Lng": -99.153220653534, "Name": "" }], "Price": 5, "Route": { "FromName": "Ciudad Azteca", "Name": "Linea B", "ToName": "Buenavista", "Type": { "Name": "Metro" } }, "Start": { "Lat": 19.444457936575, "Lng": -99.139766693115, "Name": "Garibaldi", "Route": { "FromName": "Ciudad Azteca", "Name": "Linea B", "ToName": "Buenavista", "Type": { "Name": "Metro" } } }, "StartName": "Metro Garibaldi", "Time": 2.5213250394822664, "Type": { "Name": "Metro" } }, { "Distance": 0.0584877767350209, "End": { "Lat": 19.4470680791, "Lng": -99.1530919075, "Name": "Buenavista", "Route": { "FromName": "Indios Verdes", "Name": "Linea 1", "ToName": "El Caminero", "Type": { "Name": "Metrobús" } } }, "EndName": "Metrobús Buenavista", "InDirection": null, "Path": [{ "Lat": 19.446542007274, "Lng": -99.153220653534, "Name": "" }, { "Lat": 19.4470680791, "Lng": -99.1530919075, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.446542007274, "Lng": -99.153220653534, "Name": "Buenavista", "Route": { "FromName": "Ciudad Azteca", "Name": "Linea B", "ToName": "Buenavista", "Type": { "Name": "Metro" } } }, "StartName": "Metro Buenavista", "Time": 6.7018533208202511, "Type": { "Name": "Caminado" } }, { "Distance": 2.2574733928860757, "End": { "Lat": 19.4648321199, "Lng": -99.1423845291, "Name": "Circuito", "Route": { "FromName": "Indios Verdes", "Name": "Linea 1", "ToName": "El Caminero", "Type": { "Name": "Metrobús" } } }, "EndName": "Metrobús Circuito", "InDirection": "Indios Verdes", "Path": [{ "Lat": 19.4470680791, "Lng": -99.1530919075, "Name": "" }, { "Lat": 19.457184514, "Lng": -99.1484999656, "Name": "" }, { "Lat": 19.4605834945, "Lng": -99.1456460952, "Name": "" }, { "Lat": 19.4648321199, "Lng": -99.1423845291, "Name": "" }], "Price": 6, "Route": { "FromName": "Indios Verdes", "Name": "Linea 1", "ToName": "El Caminero", "Type": { "Name": "Metrobús" } }, "Start": { "Lat": 19.4470680791, "Lng": -99.1530919075, "Name": "Buenavista", "Route": { "FromName": "Indios Verdes", "Name": "Linea 1", "ToName": "El Caminero", "Type": { "Name": "Metrobús" } } }, "StartName": "Metrobús Buenavista", "Time": 6.1919270204875216, "Type": { "Name": "Metrobús" } }, { "Distance": 9.8278137529306411E-07, "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito", "Route": null }, "EndName": "Metrobús Circuito", "InDirection": null, "Path": [{ "Lat": 19.4648321199, "Lng": -99.1423845291, "Name": "" }, { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.4648321199, "Lng": -99.1423845291, "Name": "Circuito", "Route": { "FromName": "Indios Verdes", "Name": "Linea 1", "ToName": "El Caminero", "Type": { "Name": "Metrobús" } } }, "StartName": "Metrobús Circuito", "Time": 1.1793376503516769E-05, "Type": { "Name": "Caminado" } }], "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco" }, "StartTravelTime": "\/Date(1480139732509-0800)\/", "TotalDistance": 13.070228151436618, "TotalPrice": 11, "TotalTime": 43.401196583927884 }, { "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito" }, "EndTravelTime": "\/Date(1480142340418-0800)\/", "Items": [{ "Distance": 5.7106640952478206E-07, "End": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Apatlaco", "InDirection": null, "Path": [{ "Lat": 19.37923123, "Lng": -99.10968304, "Name": "" }, { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco", "Route": null }, "StartName": "Metro Apatlaco", "Time": 6.0000068527969139, "Type": { "Name": "Caminado" } }, { "Distance": 8.3843529903748344, "End": { "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "Bellas Artes", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "EndName": "Metro Bellas Artes", "InDirection": "Garibaldi", "Path": [{ "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "" }, { "Lat": 19.38858273578, "Lng": -99.112322330475, "Name": "" }, { "Lat": 19.398540896103, "Lng": -99.113502502441, "Name": "" }, { "Lat": 19.403114968757, "Lng": -99.122128486633, "Name": "" }, { "Lat": 19.406596035209, "Lng": -99.126291275024, "Name": "" }, { "Lat": 19.408498447018, "Lng": -99.135754108429, "Name": "" }, { "Lat": 19.413330078125, "Lng": -99.144180297852, "Name": "" }, { "Lat": 19.421652813188, "Lng": -99.143371582031, "Name": "" }, { "Lat": 19.426772609418, "Lng": -99.142255783081, "Name": "" }, { "Lat": 19.431243896484, "Lng": -99.141494750977, "Name": "" }, { "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "" }], "Price": 5, "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } }, "Start": { "Lat": 19.379231225787, "Lng": -99.109683036804, "Name": "Apatlaco", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Apatlaco", "Time": 14.373176554928291, "Type": { "Name": "Metro" } }, { "Distance": 0.22158341652166003, "End": { "Lat": 19.4367385483, "Lng": -99.1439831256, "Name": null, "Route": { "FromName": "Raza", "Name": "SRuta 1-90", "ToName": "Ejes, Tlalnepantla", "Type": { "Name": "Microbús" } } }, "EndName": "Av Hidalgo y Trujano", "InDirection": null, "Path": [{ "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "" }, { "Lat": 19.4367385483, "Lng": -99.1439831256, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.43642490888, "Lng": -99.141955375671, "Name": "Bellas Artes", "Route": { "FromName": "Garibaldi", "Name": "Linea 8", "ToName": "Constitución De 1917", "Type": { "Name": "Metro" } } }, "StartName": "Metro Bellas Artes", "Time": 8.65900099825992, "Type": { "Name": "Caminado" } }, { "Distance": 3.8245935168633558, "End": { "Lat": 19.4647208478, "Lng": -99.1413652896, "Name": null, "Route": { "FromName": "Raza", "Name": "SRuta 1-90", "ToName": "Ejes, Tlalnepantla", "Type": { "Name": "Microbús" } } }, "EndName": "Massenet y Prol Zaragoza", "InDirection": "Raza", "Path": [{ "Lat": 19.4367385483, "Lng": -99.1439831256, "Name": "" }, { "Lat": 19.439763621, "Lng": -99.1432428359, "Name": "" }, { "Lat": 19.439915379, "Lng": -99.1436398029, "Name": "" }, { "Lat": 19.4401581915, "Lng": -99.1438651084, "Name": "" }, { "Lat": 19.4393386978, "Lng": -99.144809246, "Name": "" }, { "Lat": 19.4399963166, "Lng": -99.1487681865, "Name": "" }, { "Lat": 19.4435575288, "Lng": -99.1478669643, "Name": "" }, { "Lat": 19.4500019102, "Lng": -99.1463971138, "Name": "" }, { "Lat": 19.4524399846, "Lng": -99.1458499431, "Name": "" }, { "Lat": 19.4565269649, "Lng": -99.144873619, "Name": "" }, { "Lat": 19.4596528283, "Lng": -99.1441655158, "Name": "" }, { "Lat": 19.4606947694, "Lng": -99.1439294815, "Name": "" }, { "Lat": 19.4609780144, "Lng": -99.1439187526, "Name": "" }, { "Lat": 19.4613219541, "Lng": -99.144090414, "Name": "" }, { "Lat": 19.4631427989, "Lng": -99.1426205635, "Name": "" }, { "Lat": 19.4647208478, "Lng": -99.1413652896, "Name": "" }], "Price": 4, "Route": { "FromName": "Raza", "Name": "SRuta 1-90", "ToName": "Ejes, Tlalnepantla", "Type": { "Name": "Microbús" } }, "Start": { "Lat": 19.4367385483, "Lng": -99.1439831256, "Name": null, "Route": { "FromName": "Raza", "Name": "SRuta 1-90", "ToName": "Ejes, Tlalnepantla", "Type": { "Name": "Microbús" } } }, "StartName": "Av Hidalgo y Trujano", "Time": 13.112892057817223, "Type": { "Name": "Microbús" } }, { "Distance": 0.11072206862759677, "End": { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "Metrobús Circuito", "Route": null }, "EndName": "Metrobús Circuito", "InDirection": null, "Path": [{ "Lat": 19.4647208478, "Lng": -99.1413652896, "Name": "" }, { "Lat": 19.46483212, "Lng": -99.14238452, "Name": "" }], "Price": 0, "Route": null, "Start": { "Lat": 19.4647208478, "Lng": -99.1413652896, "Name": null, "Route": { "FromName": "Raza", "Name": "SRuta 1-90", "ToName": "Ejes, Tlalnepantla", "Type": { "Name": "Microbús" } } }, "StartName": "Massenet y Prol Zaragoza", "Time": 1.3286648235311613, "Type": { "Name": "Caminado" } }], "Start": { "Lat": 19.37923123, "Lng": -99.10968304, "Name": "Metro Apatlaco" }, "StartTravelTime": "\/Date(1480139731993-0800)\/", "TotalDistance": 12.541252563453858, "TotalPrice": 9, "TotalTime": 43.47374128733351 }] });


    }

    private createSearchParams(params: any): URLSearchParams {
        let sp = new URLSearchParams();

        if (params) {
            for (var key in params) {
                sp.set(key, params[key]);
            }
        }
        //set api key
        sp.set("key", this.config.get("apiKey"));

        return sp;
    }

    private createHeaders() {
        let h = new Headers();

        //if (this.data.sessionId) {
        //    h.set("Facter-Session", this.data.sessionId);
        //}

        return h;
    }
}

